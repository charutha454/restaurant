/* @license GNU-GPL-2.0-or-later https://www.drupal.org/licensing/faq */
(function($){'use strict';var blazyExists=$('.b-lazy').length;if(blazyExists)var blazy=new Blazy({loadInvisible:true});function makeid(){var text='';var possible='ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';for(var i=0;i<5;i++)text+=possible.charAt(Math.floor(Math.random()*possible.length));return text;}function precisionRound(number,precision){var factor=Math.pow(10,precision);return Math.round(number*factor)/factor;}Drupal.behaviors.wendys_nutrition={attach:function(context,settings){$('.brick--food-menu-menu').each(function(){let link=$(this).attr('categoryLink');$('.node--food-menu-category',$(this)).each(function(){let id=$(this).attr('categoryid');$('a',this).attr('href',link+'?categoryId='+id);});});$('.brick--food-menu-category').each(function(){let categoryLink=window.location.pathname;$('.node--food-menu-category',$(this)).each(function(){let id=$(this).attr('categoryid');$('a',this).attr('href',categoryLink+'?categoryId='+id);});let itemLink=$(this).attr('itemLink');$('.node--food-menu-item',$(this)).each(function(){let id=$(this).attr('itemid');$('a',this).attr('href',itemLink+'?itemId='+id);});});}};Drupal.behaviors.wendys={attach:function(context,settings){let $body=$('body');var lang=$('html').attr('lang');if(lang!=='en-ca'&&lang!=='fr-ca')$(".mobile .icon--rewards").attr('href','https://order.wendys.com/scan-in-restaurant');$('.menu--legal-menu .do-not-sell').on('click',function(e){e.preventDefault();e.stopPropagation();Optanon.ToggleInfoDisplay();});const regionTopNavBelowEl=document.querySelector('.region-top-navigation-below');const $regionTopNavBelow=$('.region-top-navigation-below');let regionTopNavBelowHeight=$regionTopNavBelow.height();const resizeObserverHeightChange=new ResizeObserver((entries)=>{for(const entry of entries){regionTopNavBelowHeight=entry.target.offsetHeight;if(regionTopNavBelowHeight)$body.addClass('top-navigation-below-region-has-content');else{$body.removeClass('top-navigation-below-region-has-content');resizeObserverHeightChange.disconnect();}}});if(regionTopNavBelowEl)resizeObserverHeightChange.observe(regionTopNavBelowEl);$('.brick--history').each(function(){var firstClick=true;const $historySetup=$(once('setup-history',$(this)));$historySetup.each(function(){var history=$(this);$('.section-selector .item',$(this)).each(function(){$(this).bind('click',function(){var attr=$(this).attr('data-attr-selector');$('.section-selector .item',history).removeClass('selected');$(this).addClass('selected');$('.brick--history-section').removeClass('selected');$('.brick--history-section[data-attr-section="'+attr+'"]').addClass('selected');var next=$(this).next('.item');var prev=$(this).prev('.item');var link=$('.field--name-field-next-section-link',history);var nextLink=$('.js.next',link);if(next.text()){nextLink.text(next.text());link.removeClass('end');}else link.addClass('end');var nextLink=$('.js.prev',link);if(prev.text()){prevLink.text(prev.text());link.removeClass('start');}else link.addClass('start');if(!firstClick)$("html, body").animate({scrollTop:$(this).offset().top-110},400);firstClick=false;});});var link=$('.field--name-field-next-section-link',history);link.addClass('js');link.prepend('<div class="js prev">Prev</div>');link.append('<div class="js next">Next</div>');var nextLink=$('.js.next',link);nextLink.bind('click',function(e){e.preventDefault();var current=$('.section-selector .selected',history);var next=current.next('.item');if(next.text())next.click();return;});var prevLink=$('.js.prev',link);prevLink.bind('click',function(e){e.preventDefault();var current=$('.section-selector .selected',history);var next=current.prev('.item');if(next.text())next.click();return;});var attr=$('.section-selector .item',$(this)).first().click();});});var isScrolling;var lastScrollTop=0;var delta=5;var headerHeight=$('header').outerHeight();if(once('header-scroll','html').length)$(window).on('scroll',function(){isScrolling=true;});function headerTopUpdateClass(){const $header=$('.branch-banner-is-active header').first();if($(window).scrollTop()<=76){$header.removeClass('below-top');$header.addClass('top');}else{$header.removeClass('top');$header.addClass('below-top');}}setInterval(function(){if(isScrolling){hasScrolled();isScrolling=false;}},200);function hasScrolled(){var currentScroll=$(window).scrollTop();if(Math.abs(lastScrollTop-currentScroll)<=delta)return;if(currentScroll>lastScrollTop&&currentScroll>headerHeight){$('header').addClass('closed');$regionTopNavBelow.addClass('closed');}else{if(currentScroll+$(window).height()<$(document).height()){$('header').removeClass('closed');$regionTopNavBelow.removeClass('closed');}}headerTopUpdateClass();lastScrollTop=currentScroll;}headerTopUpdateClass();if($('[data-attr-stock]',context).length>0)$.ajax({url:'/api/stock.json?unique='+makeid()}).done(function(data){$('[data-attr-stock=stock-price-current]').text('$'+data.current);$('[data-attr-stock=percent]').text('('+precisionRound(data.percent*100,2)+'%)');$('[data-attr-stock=cap]').text('$'+precisionRound(data.cap/1000000000,1)+' Billion');var date=data.div_date.split('-');$('[data-attr-dividend=yield]').text(precisionRound(data.div_yield,2)+'%');$('[data-attr-dividend=date]').text('(As of '+date[1]+'/'+date[2]+'/'+date[0]+')');var today=new Date();var dd=today.getDate();var mm=today.getMonth()+1;var yyyy=today.getFullYear();if(dd<10)dd='0'+dd;if(mm<10)mm='0'+mm;var today=mm+'/'+dd+'/'+yyyy;$('[data-attr-stock=cap-date]').text('(As of '+today+')');if(data.percent<0)$('[data-attr-stock=percent]').css('color','red');});$('.brick:first',context).each(function(){var me=$(this);const $fieldNameFieldHeaders=$('.field--name-field-textmulpar-header, .field--name-field-centeredheadline-header, '+'.field--name-field-highlight-heading, .field--name-field-linkslist-header, '+'.field--name-field-textwithbg-header, .field--name-field-uppromo-header, '+'.field--name-field-article-header, .field--name-field-webform-header,'+'.field--name-field-highlightcard-cardheading');const $fieldNameFieldHeadersOnce=$(once('field-names-field-headers-setup',$fieldNameFieldHeaders));$fieldNameFieldHeadersOnce.each(function(index,value){var newTagString='<h1></h1>';if(index>0||me.hasClass('brick--text-w-background')||me.hasClass('brick--recaptcha-unlock')||me.parents('.brick--recaptcha-unlock').length>0)newTagString='<h2></h2>';var newElem=$(newTagString,{html:$(this).html()});$.each(this.attributes,function(){newElem.attr(this.name,this.value);});$(this).replaceWith(newElem);});});$('.menu-item--menu-icon-wrapper').last().find('a').addClass('menu-item--no-right-padding');$('.menu-item--order-wrapper').first().addClass('menu-item--order-wrapper--margin-left');var isSpanish=(window.location.href.toLowerCase().indexOf('es-us')>=0||window.location.href.toLowerCase().indexOf('es-mx')>=0||window.location.hostname.toLowerCase().indexOf('mx')>=0);var isFrench=(window.location.href.toLowerCase().indexOf('fr-ca')>=0);var menu_item_order_pickup=$('.region-top-utility .menu--utility .menu .menu-item .default .blue-nav');var menu_item_order_delivery=$('.region-top-utility .menu--utility .menu .menu-item .default .darker-blue-nav');var menu_item_facturacion=$('.region-top-utility .menu--utility .menu .menu-item .default .mx-blue-nav');var menu_item_order_pickup_text=menu_item_order_pickup.text().match(/\S+/g);var menu_item_order_delivery_text=menu_item_order_delivery.text().match(/\S+/g);var menu_item_facturacion_text=menu_item_facturacion.text().match(/\S+/g);if(menu_item_order_pickup_text!==null){menu_item_order_pickup.text('');menu_item_order_pickup.append("<div class='menu-link-order-pickup-container'></div>");var menu_link_order_pickup_container=$('.region-top-utility .menu--utility .menu .menu-item .default .blue-nav .menu-link-order-pickup-container');menu_link_order_pickup_container.append("<div class='menu-link-order-pickup-img'></div>");menu_link_order_pickup_container.append("<div class='menu-link-order-pickup'></div>");var menu_link_order_pickup=$('.region-top-utility .menu--utility .menu .menu-item .default .blue-nav .menu-link-order-pickup-container .menu-link-order-pickup');if(isSpanish||isFrench){menu_link_order_pickup.append("<div class='menu-link-title-0'>"+menu_item_order_pickup_text[0]+"<br></div>");menu_link_order_pickup.append("<div class='menu-link-title-1'>"+menu_item_order_pickup_text[1]+" "+menu_item_order_pickup_text[2]+"</div>");}else for(var i=0;i<menu_item_order_pickup_text.length;i++)menu_link_order_pickup.append("<div class='menu-link-title-"+i+"'>"+menu_item_order_pickup_text[i]+"<br></div>");}if(menu_item_order_delivery_text!==null){menu_item_order_delivery.text('');menu_item_order_delivery.append("<div class='menu-link-order-delivery-container'></div>");var menu_link_order_delivery_container=$('.region-top-utility .menu--utility .menu .menu-item .default .darker-blue-nav .menu-link-order-delivery-container');menu_link_order_delivery_container.append("<div class='menu-link-order-delivery-img'></div>");menu_link_order_delivery_container.append("<div class='menu-link-order-delivery'></div>");var menu_link_order_delivery=$('.region-top-utility .menu--utility .menu .menu-item .default .darker-blue-nav .menu-link-order-delivery-container .menu-link-order-delivery');if(isSpanish||isFrench){menu_link_order_delivery.append("<div class='menu-link-title-0'>"+menu_item_order_delivery_text[0]+"<br></div>");menu_link_order_delivery.append("<div class='menu-link-title-1'>"+menu_item_order_delivery_text[1]+" "+menu_item_order_delivery_text[2]+"</div>");}else for(var i=0;i<menu_item_order_delivery_text.length;i++)menu_link_order_delivery.append("<div class='menu-link-title-"+i+"'>"+menu_item_order_delivery_text[i]+"<br></div>");}if(menu_item_facturacion_text!==null){menu_item_facturacion.text('');menu_item_facturacion.append("<div class='menu-link-facturacion-container'></div>");var menu_link_facturacion_container=$('.region-top-utility .menu--utility .menu .menu-item .default .mx-blue-nav .menu-link-facturacion-container');menu_link_facturacion_container.append("<div class='menu-link-facturacion'></div>");var menu_link_facturacion=$('.region-top-utility .menu--utility .menu .menu-item .default .mx-blue-nav .menu-link-facturacion-container .menu-link-facturacion');for(var i=0;i<menu_item_facturacion_text.length;i++)menu_link_facturacion.append("<div class='menu-link-title-"+i+"'>"+menu_item_facturacion_text[i]+"<br></div>");}}};}(jQuery));function getCookieArray(){var cookieArr=document.cookie.split('; ');cookieArr.map(function(data){var cookiePair=data.split('=');cookieArr[cookiePair[0].trim()]=decodeURIComponent(cookiePair[1]);});return cookieArr;}function setCookieForSession(name,value){document.cookie=name+'='+value+';path=/;expires=Session;domain=.wendys.com;path=/';}function setCookieValue(name,data){data=encodeURI(data);setCookieForSession(String(name),String(data));}function setJsonCookieValue(name,data){data=JSON.stringify(data);setCookieValue(name,data);}function getWenGlobalWebCookie(){var cookieArr=getCookieArray();if(typeof cookieArr['wenGlobalWeb']==='undefined')return {'user':{cntry:'',lang:''}};return JSON.parse(getCookieArray().wenGlobalWeb);}function setCurrentCountryAndLanguageCookie(){if(drupalSettings.path.currentLanguage=='en-uk')return;var langcode=drupalSettings.path.currentLanguage.split('-');var language=langcode[0];var country=langcode[1];var globalCookie=getWenGlobalWebCookie();globalCookie.user.cntry=country.toUpperCase();globalCookie.user.lang=language;setJsonCookieValue('wenGlobalWeb',globalCookie);}setCurrentCountryAndLanguageCookie();;
(function($,Drupal){Drupal.behaviors.utilityLocator={attach:function(context,settings){const $menuUtility=$(once('menu--utility-setup','.menu--utility'));$menuUtility.each(function(){const rawCookie=Cookies.get('wenGlobalWeb');var yourAccount=Drupal.t("Account");var hello=Drupal.t("Hello,");var findWendys=Drupal.t("Find a Wendy's");if(rawCookie){const parsedCookie=JSON.parse(rawCookie);if(parsedCookie.selectedLocation){const $replaceLocation=$(once('replacer','.default > .replace-location'));$replaceLocation.html("<div class='static'>"+findWendys+"</div><div>"+parsedCookie.selectedLocation.title+"</div>").addClass('replaced');}if(parsedCookie.user.firstName){const $replaceName=$(once('replacer','.default > .replace-name'));const $replaceNameMobile=$(once('replacer','.mobile > .replace-name'));$replaceName.html("<div class='static'>"+yourAccount+"</div><div class='dynamic'>"+hello+" "+parsedCookie.user.firstName+"</div>").addClass('replaced');$replaceNameMobile.html("<div>"+hello+" "+parsedCookie.user.firstName.charAt(0)+".</div>").addClass('replaced');}}});}};}(jQuery,Drupal));;
